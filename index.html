<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Index</title>
  <link href='https://fonts.googleapis.com/css?family=Roboto:400,700&subset=latin,cyrillic' rel='stylesheet'>

  <link rel="stylesheet" href="./build/css/common.css">
</head>

<body>


  <div id="fullpage">



    <div class="section intro">




      <h1> Друзья! <br>
        5 марта в <b>12.00</b> <br>
    приходите на выставку Павла Креста <br>
    (Paul Cross)</h1>

      <a target="_blank" href="http://www.infopaulcross.com/">infopaulcross.com</a>
      <p>Приходите все. Вход свободный</p>

      <svg width="100" height="70" viewbox="0 0 100 70" class="scroll">
          <text text-anchor="middle" x="50%" y="50%" dy="-12px" font-size="4px" fill="#FFF" stroke="">ПОДРОБНО</text>
          <polygon points="10,30 50,60 90,30" stroke="" fill="#FFF">
              <animatemotion dur="1s" values="0,0; 0,5; 0,0" repeatcount="indefinite"></animatemotion>
          </polygon>
      </svg>

    </div>



    <div class="section Imgs">

      <div class="slide">
        <div class="videoWrapper">
          <!-- width="733" height="548" -->
          <iframe src="https://www.youtube.com/embed/QcFfhrV11Bo" frameborder="0" allowfullscreen></iframe>
        </div>

      </div>

      <div class="slide intro">
        <h1>Потрясающая энергетика</h1>
        <br>
        <h2>Подробности</h2>
        <h3>
          <a href="https://myslo.ru/city/reviews/sobitiya/v-likerke-loft-otkrilas-vistavka-tulskogo-avangardista">тут</a>
          <a href="https://yadi.sk/d/rs3vC5nTjiUfU">тут</a>
          <a href="https://vk.com/transform_paul">тут</a>
        </h3>
      </div>

      <div class="slide">
        <img src="./build/img/1/1.jpg" alt="">
      </div>
      <div class="slide">
        <img src="./build/img/1/2.jpg" alt="">
      </div>
      <div class="slide">
        <img src="./build/img/1/3.jpg" alt="">
      </div>
      <div class="slide">
        <img src="./build/img/1/4.jpg" alt="">
      </div>
      <div class="slide">
        <img src="./build/img/1/5.jpg" alt="">
      </div>
      <div class="slide">
        <img src="./build/img/1/6.jpg" alt="">
      </div>
      <div class="slide">
        <img src="./build/img/1/7.jpg" alt="">
      </div>
      <div class="slide">
        <img src="./build/img/1/8.jpg" alt="">
      </div>
      <div class="slide">
        <img src="./build/img/1/9.jpg" alt="">
      </div>
      <div class="slide">
        <img src="./build/img/1/10.jpg" alt="">
      </div>
      <div class="slide">
        <img src="./build/img/1/11.jpg" alt="">
      </div>
    </div>



    <div class="section" id="screen">
      <div id="cube" class='cube'>

        <!-- cube images -->
        <img id="1" src="./build/img/x.jpg" class='face' data-transform="translateZ(-400px)" class='face'>
        <img id="2" src="./build/img/2.jpg" class='face' data-transform="rotateY(90deg) translateZ(-400px)">
        <img id="3" src="./build/img/3.jpg" class='face' data-transform="rotateY(-90deg) translateZ(-400px)">
        <img id="4" src="./build/img/4.jpg" class='face' data-transform="rotateY(180deg) translateZ(-400px)">
        <img id="5" src="./build/img/5.jpg" class='face' data-transform="rotateX(90deg) translateZ(-300px)">
        <img id="6" src="./build/img/1.jpg" class='face' data-transform="rotateX(-90deg) translateZ(-300px)">
        <!-- bonus image -->
        <img id="7" src="./build/img/7.jpg" class='face' data-transform="rotateY(180deg) translateZ(305px)" style="visibility:hidden">
        <!-- buttons -->
        <img src="./build/img/7.jpg" class='face button' alt="7" data-transform="translateY(-80px) translateZ(-340px) scale(0.5)">
        <img src="./build/img/2.jpg" class='face button' alt="2" data-transform="translateX(-200px) translateY(-80px) translateZ(-340px) scale(0.5)">
        <img src="./build/img/3.jpg" class='face button' alt="3" data-transform="translateX(200px) translateY(-80px) translateZ(-340px) scale(0.5)">
        <img src="./build/img/4.jpg" class='face button' alt="4" data-transform="translateY(80px) translateZ(-340px) scale(0.5)">
        <img src="./build/img/5.jpg" class='face button' alt="5" data-transform="translateX(-200px) translateY(80px) translateZ(-340px) scale(0.5)">
        <img src="./build/img/1.jpg" class='face button' alt="6" data-transform="translateX(200px) translateY(80px) translateZ(-340px) scale(0.5)">
      </div>
    </div>


    <div class="section">
      <div id="Gmap">
        <div id="stickerMap">
          место проведения: <br>
          ТЦ ВДНХ - No Concept ART gallery FENIX (<a href="https://www.facebook.com/%D0%A2%D0%A6-%D0%92%D0%94%D0%9D%D0%A5-No-Concept-ART-gallery-FENIX-200223450319860/">facebook</a>)<br>
          1-я Останкинская улица, 55
        </div>
        <div id="zoom-in"></div>
        <div id="zoom-out"></div>
        <div id="map_canvas">

        </div>
      </div>
    </div>

  </div>






  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/2.7.7/jquery.fullPage.min.js"></script>


  <script src="//maps.google.com/maps/api/js?sensor=false"></script>

  <script>
    $(function() {

      //http://alvarotrigo.com/fullPage/examples/apple.html
      $('#fullpage').fullpage({
        //continuousVertical: true,
        //scrollOverflow: true, //если контент выходит за границы
        //navigation: true, //кнопки по секциям
        //navigationTooltips //массив всплывающих подсказок

        //Design
        //verticalCentered: true,
        //resize : false,
      });


      // map
      var _draggable = ($(window).width() > 800) ? true : false;


      var latitude = 55.82431 //55.7348971, //55.804693,
      longitude = 37.63453, 12 //37.5884822; //37.591822;
      var map_zoom = 17; //17
      var marker_url = './build/img/map.png';
      var style = [{
        "featureType": "poi",
        "elementType": "labels",
        "stylers": [{
          "visibility": "off"
        }]
      }, {
        "stylers": [{
          "hue": "#21313f"
        }, {
          "saturation": -80
        }, {
          "gamma": 1 //2.15
        }, {
          "lightness": 12
        }]
      }, {
        "featureType": "road",
        "elementType": "labels.text.fill",
        "stylers": [{
          "visibility": "on"
        }, {
          "lightness": 24
        }]
      }, {
        "featureType": "road",
        "elementType": "geometry",
        "stylers": [{
          "lightness": 57
        }]
      }];

      var map_options = {
        center: new google.maps.LatLng(latitude, longitude),
        zoom: map_zoom,
        panControl: false,
        zoomControl: false,
        mapTypeControl: false,
        streetViewControl: false,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        scrollwheel: false,
        draggable: _draggable, //false,
        styles: style,
      }

      //inizialize map
      var map = new google.maps.Map(document.getElementById('map_canvas'), map_options);
      //add a custom marker to the map
      var marker = new google.maps.Marker({
        position: new google.maps.LatLng(latitude, longitude),
        map: map,
        //visible: true,
        animation: google.maps.Animation.BOUNCE,
        icon: marker_url,
      });

      //add custom buttons for the zoom-in/zoom-out
      function CustomZoomControl(controlDiv, map) {
        //grap the zoom elements from the DOM and insert them in the map
        var controlUIzoomIn = document.getElementById('zoom-in'),
          controlUIzoomOut = document.getElementById('zoom-out');
        controlDiv.appendChild(controlUIzoomIn);
        controlDiv.appendChild(controlUIzoomOut);

        // Setup the click event listeners and zoom-in or out according to the clicked element
        google.maps.event.addDomListener(controlUIzoomIn, 'click', function() {
          map.setZoom(map.getZoom() + 1)
        });
        google.maps.event.addDomListener(controlUIzoomOut, 'click', function() {
          map.setZoom(map.getZoom() - 1)
        });
      }

      var zoomControlDiv = document.createElement('div');
      var zoomControl = new CustomZoomControl(zoomControlDiv, map);

      //insert the zoom div on the top left of the map
      map.controls[google.maps.ControlPosition.LEFT_TOP].push(zoomControlDiv);
    });
  </script>

  <script>
    // cube
    ! function() {
      "use strict";
      //
      // ===== pointer library =====
      //
      var screen = {};
      (function() {
        this.elem = document.getElementById("screen"),
        this.width = 0;
        this.height = 0;
        this.resize = function() {
          this.width = +this.elem.offsetWidth;
          this.height = +this.elem.offsetHeight;
        }
        this.elem.onselectstart = function() {
          return false;
        }
        this.elem.ondragstart = function() {
          return false;
        }
        window.addEventListener('resize', this.resize.bind(this), false);
        this.resize();
        this.pointer = {
          x: 0,
          y: 0,
          dx: 0,
          dy: 0,
          touchMode: false,
          center: function(s) {
            this.dx *= s;
            this.dy *= s;
            endX = endY = 0;
          }
        }
        var started = false,
          startX = 0,
          startY = 0,
          endX = 0,
          endY = 0;
        this.addEvent = function(e, fn) {
          for (var i = 0, events = e.split(','); i < events.length; i++) {
            this.elem.addEventListener(events[i], fn.bind(this.pointer), false);
          }
        }
        this.addEvent("mousemove,touchmove", function(e) {
          e.preventDefault();
          this.touchMode = e.targetTouches;
          var pointer = this.touchMode ? this.touchMode[0] : e;
          this.x = pointer.clientX;
          this.y = pointer.clientY;
          if (started) {
            this.dx = endX - (this.x - startX);
            this.dy = endY - (this.y - startY);
          }
        });
        this.addEvent("mousedown,touchstart", function(e) {
          e.preventDefault();
          this.touchMode = e.targetTouches;
          var pointer = this.touchMode ? this.touchMode[0] : e;
          startX = this.x = pointer.clientX;
          startY = this.y = pointer.clientY;
          started = true;
          setTimeout(function() {
            if (!started && Math.abs(startX - this.x) < 11 && Math.abs(startY - this.y) < 11) {
              if (this.tap) this.tap(e);
            }
          }.bind(this), 200);
        });
        this.addEvent("mouseup,touchend,touchcancel", function(e) {
          e.preventDefault();
          endX = this.dx;
          endY = this.dy;
          started = false;
        });
      }).apply(screen);
      var pointer = screen.pointer;
      var transform = (typeof document.body.style.webkitTransform != "undefined") ? "-webkit-transform" : "transform";
      //
      // ===== tweens engine =====
      //
      var tweens = {};
      (function() {
        var tweens = [];
        var proto = {
          normalPI: function() {
            if (Math.abs(this.target - this.value) > Math.PI) {
              if (this.target < this.value) this.value -= 2 * Math.PI;
              else this.value += 2 * Math.PI;
            }
          },
          setTarget: function(target, speedMod) {
            this.speedMod = (speedMod) ? speedMod : 1;
            this.target = target;
            if (this.isAngle) {
              this.target = this.target % (2 * Math.PI);
              this.normalPI();
            }
            if (this.running && this.oldTarget === target) return;
            this.oldTarget = target;
            this.running = true;
            this.prog = 0;
            this.from = this.value;
            this.dist = -(this.target - this.from) * 0.5;
          },
          ease: function() {
            if (!this.running) return;
            var s = this.speedMod * this.steps;
            if (this.prog++ < s) {
              this.value = this.dist * (Math.cos(Math.PI * (this.prog / s)) - 1) + this.from;
              if (this.isAngle) this.normalPI();
            } else {
              this.running = false;
              this.value = this.target;
            }
          }
        }
        this.add = function(steps, initValue, initValueTarget, isAngle) {
          var tween = Object.create(proto);
          tween.target = initValueTarget || 0;
          tween.value = initValue || 0;
          tween.steps = steps;
          tween.isAngle = isAngle || false;
          tween.speedMod = 1;
          tween.setTarget(tween.target);
          tweens.push(tween);
          return tween;
        }
        this.iterate = function() {
          for (var i = 0, len = tweens.length; i < len; i++) {
            tweens[i].ease();
          }
        }
      }).apply(tweens);
      //
      // ===== css3D engine =====
      //
      var cube = document.getElementById("cube");
      var faces = document.querySelectorAll(".face");
      // ---- read computed matrix ----
      var getComputedMatrix = function(elem) {
          var computedStyle = getComputedStyle(elem, null);
          var val = computedStyle.transform || computedStyle.webkitTransform;
          return val.split(/\s*[(),]\s*/).slice(1, -1);
        }
        // ---- initial transformation ----
      for (var i = 0, len = faces.length; i < len; i++) {
        var face = faces[i];
        face.style[transform] = face.getAttribute("data-transform");
      }
      // ---- target photo ----
      pointer.tap = function(e) {
          if (e.target.className.indexOf("face") >= 0) {
            var t = e.target.alt == "" ? e.target : document.getElementById(e.target.alt);
            camera.setTarget(t);
          }
        }
        // ---- set camera -----
      var camera = {
          globalRX: 0,
          globalRY: 0,
          z: tweens.add(100, 0, 0),
          rx: tweens.add(100, 0, 0, true),
          ry: tweens.add(100, 0, 0, true),
          targeted: null,
          setTarget: function(elem) {
            // read transformation matrix
            var matrix = getComputedMatrix(elem);
            // determine target angles
            var rotateY = Math.asin(-matrix[2]);
            var rotateX = Math.atan2(+matrix[6], +matrix[10]);
            if (rotateY) rotateY -= Math.PI;
            if (rotateX) rotateX -= Math.PI;
            // set target
            if (this.targeted) {
              this.targeted.style.outline = "rgba(0,0,0,1) solid 10px";
            }
            if (this.targeted != elem) {
              this.z.setTarget(600);
              if (elem.id == "4") {
                document.getElementById("7").style.visibility = "hidden";
              }
              if (elem.id == "7") {
                this.z.setTarget(-200);
                document.getElementById("7").style.visibility = "visible";
              }
              elem.style.outline = "rgba(255,255,255,1) solid 10px";
              this.targeted = elem;
            } else {
              this.z.setTarget(0);
              if (elem.id == "7") {
                camera.setTarget(document.getElementById("1"));
                return;
              }
              this.targeted = null;
            }
            // set target angles
            this.rx.setTarget(rotateX);
            this.ry.setTarget(rotateY);
          },
          move: function() {
            tweens.iterate();
            if (pointer.touchMode) {
              // interaction on touch mobiles
              var x = -pointer.dy * 0.001;
              var y = pointer.dx * 0.001;
              pointer.center(0.98);
            } else {
              // interaction with mouse
              var x = -(pointer.y - screen.height * 0.5) * 0.001;
              var y = +(pointer.x - screen.width * 0.5) * 0.001;
            }
            // ease global angles
            this.globalRX += ((x - this.globalRX) * 0.1);
            this.globalRY += ((y - this.globalRY) * 0.1);
            // cube transformation
            cube.style[transform] = "translateZ(" + (this.z.value) + "px) rotateX(" + (this.rx.value + this.globalRX) + "rad) rotateY(" + (this.ry.value + this.globalRY) + "rad)";
          }
        }
        // main loop
      var run = function() {
        requestAnimationFrame(run);
        camera.move();
      }
      run();
    }();
  </script>
</body>

</html>
