<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>выставка Paul Cross</title>
  <link href='https://fonts.googleapis.com/css?family=Roboto:400,700&subset=latin,cyrillic' rel='stylesheet'>

  <link rel="stylesheet" href="./build/css/common.css">
</head>

<body>


  <div id="fullpage">



    <div class="section intro">

      <canvas id="network"></canvas>


      <h1> Друзья! <br>
        5 марта в <b>17.00</b> <br>
    приходите на выставку Павла Креста <br>
    (Paul Cross)</h1>

      <a target="_blank" href="http://www.infopaulcross.com/">infopaulcross.com</a>
      <p>Приходите все. Вход свободный</p>

      <svg width="100" height="70" viewbox="0 0 100 70" class="scroll">
        <text text-anchor="middle" x="50%" y="50%" dy="-12px" font-size="4px" fill="#FFF" stroke="">ПОДРОБНО</text>
        <polygon points="10,30 50,60 90,30" stroke="" fill="#FFF">
          <animatemotion dur="1s" values="0,0; 0,5; 0,0" repeatcount="indefinite"></animatemotion>
        </polygon>
      </svg>

    </div>



    <div class="section Imgs">

      <div class="slide">
        <div class="videoWrapper">
          <!-- width="733" height="548" -->
          <iframe src="https://www.youtube.com/embed/QcFfhrV11Bo" frameborder="0" allowfullscreen></iframe>
        </div>
      </div>

      <div class="slide intro">
        <h1>Потрясающая энергетика</h1>
        <br>
        <br>
        <h2>Подробности</h2>
        <h3>
          <a href="https://myslo.ru/city/reviews/sobitiya/v-likerke-loft-otkrilas-vistavka-tulskogo-avangardista" target="_blank">тут</a>
          <a href="https://yadi.sk/d/rs3vC5nTjiUfU" target="_blank">тут</a>
          <a href="https://vk.com/transform_paul" target="_blank">тут</a>
        </h3>
      </div>

      <div class="slide">
        <img src="./build/img/1/1.jpg" alt="">
      </div>
      <div class="slide">
        <img src="./build/img/1/2.jpg" alt="">
      </div>
      <div class="slide">
        <img src="./build/img/1/3.jpg" alt="">
      </div>
      <div class="slide">
        <img src="./build/img/1/4.jpg" alt="">
      </div>
      <div class="slide">
        <img src="./build/img/1/5.jpg" alt="">
      </div>
      <div class="slide">
        <img src="./build/img/1/6.jpg" alt="">
      </div>
      <div class="slide">
        <img src="./build/img/1/7.jpg" alt="">
      </div>
      <div class="slide">
        <img src="./build/img/1/8.jpg" alt="">
      </div>
      <div class="slide">
        <img src="./build/img/1/9.jpg" alt="">
      </div>
      <div class="slide">
        <img src="./build/img/1/10.jpg" alt="">
      </div>
      <div class="slide">
        <img src="./build/img/1/11.jpg" alt="">
      </div>
    </div>



    <div class="section" id="screen">
      <div id="cube" class='cube'>

        <!-- cube images -->
        <img id="1" src="./build/img/x.jpg" class='face' data-transform="translateZ(-400px)" class='face'>
        <img id="2" src="./build/img/2.jpg" class='face' data-transform="rotateY(90deg) translateZ(-400px)">
        <img id="3" src="./build/img/3.jpg" class='face' data-transform="rotateY(-90deg) translateZ(-400px)">
        <img id="4" src="./build/img/4.jpg" class='face' data-transform="rotateY(180deg) translateZ(-400px)">
        <img id="5" src="./build/img/5.jpg" class='face' data-transform="rotateX(90deg) translateZ(-300px)">
        <img id="6" src="./build/img/1.jpg" class='face' data-transform="rotateX(-90deg) translateZ(-300px)">
        <!-- bonus image -->
        <img id="7" src="./build/img/7.jpg" class='face' data-transform="rotateY(180deg) translateZ(305px)" style="visibility:hidden">
        <!-- buttons -->
        <img src="./build/img/7.jpg" class='face button' alt="7" data-transform="translateY(-80px) translateZ(-340px) scale(0.5)">
        <img src="./build/img/2.jpg" class='face button' alt="2" data-transform="translateX(-200px) translateY(-80px) translateZ(-340px) scale(0.5)">
        <img src="./build/img/3.jpg" class='face button' alt="3" data-transform="translateX(200px) translateY(-80px) translateZ(-340px) scale(0.5)">
        <img src="./build/img/4.jpg" class='face button' alt="4" data-transform="translateY(80px) translateZ(-340px) scale(0.5)">
        <img src="./build/img/5.jpg" class='face button' alt="5" data-transform="translateX(-200px) translateY(80px) translateZ(-340px) scale(0.5)">
        <img src="./build/img/1.jpg" class='face button' alt="6" data-transform="translateX(200px) translateY(80px) translateZ(-340px) scale(0.5)">
      </div>
    </div>


    <div class="section">
      <div id="Gmap">
        <address id="stickerMap">
          МЕСТО проведения: <br>
          ТЦ ВДНХ - No Concept ART gallery FENIX (<a target="_blank" href="https://www.facebook.com/%D0%A2%D0%A6-%D0%92%D0%94%D0%9D%D0%A5-No-Concept-ART-gallery-FENIX-200223450319860/">facebook</a>)<br>
          1-я Останкинская улица, 55
          <hr>
          info@paulcross.ru <br>
          8(977)807-45-15
        </address>

        <div id="zoom-in"></div>
        <div id="zoom-out"></div>
        <div id="map_canvas">

        </div>
      </div>
    </div>

  </div>






  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/2.7.7/jquery.fullPage.min.js"></script>


  <script src="//maps.google.com/maps/api/js"></script>

  <script>
    $(function() {

      //http://alvarotrigo.com/fullPage/examples/apple.html
      $('#fullpage').fullpage({
        //continuousVertical: true,
        //scrollOverflow: true, //если контент выходит за границы
        //navigation: true, //кнопки по секциям
        //navigationTooltips //массив всплывающих подсказок

        //Design
        //verticalCentered: true,
        //resize : false,
      });


      // map
      var _draggable = ($(window).width() > 800) ? true : false;


      var latitude = 55.82431 //55.7348971, //55.804693,
      longitude = 37.63453, 12 //37.5884822; //37.591822;
      var map_zoom = 17; //17
      var marker_url = './build/img/map.png';
      var style = [{
        "featureType": "poi",
        "elementType": "labels",
        "stylers": [{
          "visibility": "off"
        }]
      }, {
        "stylers": [{
          "hue": "#21313f"
        }, {
          "saturation": -80
        }, {
          "gamma": 1 //2.15
        }, {
          "lightness": 12
        }]
      }, {
        "featureType": "road",
        "elementType": "labels.text.fill",
        "stylers": [{
          "visibility": "on"
        }, {
          "lightness": 24
        }]
      }, {
        "featureType": "road",
        "elementType": "geometry",
        "stylers": [{
          "lightness": 57
        }]
      }];

      var map_options = {
        center: new google.maps.LatLng(latitude, longitude),
        zoom: map_zoom,
        panControl: false,
        zoomControl: false,
        mapTypeControl: false,
        streetViewControl: false,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        scrollwheel: false,
        draggable: _draggable, //false,
        styles: style,
      }

      //inizialize map
      var map = new google.maps.Map(document.getElementById('map_canvas'), map_options);
      //add a custom marker to the map
      var marker = new google.maps.Marker({
        position: new google.maps.LatLng(latitude, longitude),
        map: map,
        //visible: true,
        animation: google.maps.Animation.BOUNCE,
        icon: marker_url,
      });

      //add custom buttons for the zoom-in/zoom-out
      function CustomZoomControl(controlDiv, map) {
        //grap the zoom elements from the DOM and insert them in the map
        var controlUIzoomIn = document.getElementById('zoom-in'),
          controlUIzoomOut = document.getElementById('zoom-out');
        controlDiv.appendChild(controlUIzoomIn);
        controlDiv.appendChild(controlUIzoomOut);

        // Setup the click event listeners and zoom-in or out according to the clicked element
        google.maps.event.addDomListener(controlUIzoomIn, 'click', function() {
          map.setZoom(map.getZoom() + 1)
        });
        google.maps.event.addDomListener(controlUIzoomOut, 'click', function() {
          map.setZoom(map.getZoom() - 1)
        });
      }

      var zoomControlDiv = document.createElement('div');
      var zoomControl = new CustomZoomControl(zoomControlDiv, map);

      //insert the zoom div on the top left of the map
      map.controls[google.maps.ControlPosition.LEFT_TOP].push(zoomControlDiv);
    });
  </script>



  <script>
    var Network = function() {

      this.canvas = document.getElementById('network');
      this.ctx = this.canvas.getContext('2d');
      this.canvas.height = window.innerHeight;
      this.canvas.width = window.innerWidth;

      this.aDots = [];
      this.aLines = [];
      this.iMaxDist = 170;
      this.iMinDist = 60;
      this.beat = 30;
      this.drawLine = true;
      this.mouse = {
        vx: 0,
        vy: 0,
        px: 0,
        py: 0,
        x: this.canvas.width / 2,
        y: this.canvas.height / 2,

        tm: undefined,
        moving: false
      }
      this.heartSpeed = 30;
      this.init();

    }

    Network.prototype.init = function() {
      this.getGrd();
      this.canvas.addEventListener('mousemove', this.updateMouse.bind(this), false);
      this.canvas.addEventListener('click', this.toggleLine.bind(this), false);
    }

    Network.prototype.getGrd = function() {
      this.grd = this.ctx.createLinearGradient(0, 0, this.canvas.width, 0);
      this.breakpoint = 20;
      for (var i = 0; i < this.breakpoint; i++) {
        var h = ((window.innerWidth * .7) / this.breakpoint) * i;
        var color = 'hsla( ' + h + ', 100%, 50%, 1 )';
        this.grd.addColorStop((1 / this.breakpoint) * i, color);
      }
    }

    Network.prototype.toggleLine = function() {
      this.drawLine = !this.drawLine;
    }

    Network.prototype.buildDot = function() {
      this.aDots.push(new Dot(this.mouse));
    }


    Network.prototype.updateMouse = function(e) {
      this.mouse.moving = true;
      clearTimeout(this.mouse.tm);
      this.mouse.tm = setTimeout(this.mouseStop.bind(this), 500);

      this.mouse.px = this.mouse.x;
      this.mouse.py = this.mouse.y;

      this.mouse.x = e.clientX;
      this.mouse.y = e.clientY;

      this.mouse.vx = this.mouse.x - this.mouse.px;
      this.mouse.vy = this.mouse.y - this.mouse.py;

      this.buildDot();
      this.buildDot();
      this.buildDot();

    }

    Network.prototype.mouseStop = function() {
      this.mouse.moving = false;
    }



    Network.prototype.getDist = function(dot1, dot2) {
      var dx = dot1.x - dot2.x;
      var dy = dot1.y - dot2.y;
      return Math.sqrt(dx * dx + dy * dy);
    }




    Network.prototype.checkLines = function() {
      this.aLines = [];
      for (var i = this.aDots.length - 1; i >= 0; i--) {
        for (var j = this.aDots.length - 1; j > i; j--) {
          var iDist = this.getDist(this.aDots[i], this.aDots[j]);
          if (iDist < this.iMaxDist && iDist > this.iMinDist && (this.aDots[i].r + this.aDots[j].r) > 5.5)
            this.aLines.push(new Line(this.aDots[i], this.aDots[j], iDist, this.iMaxDist));
        }

      }

    }


    Network.prototype.heartBeat = function() {
      var randX = rand(0, window.innerWidth);
      var randY = rand(0, window.innerHeight);
      for (var i = 0; i < rand(50, 100); i++) {
        this.aDots.push(new Dot({
          x: randX,
          y: randY,
          vx: rand(-8, 8),
          vy: rand(-5, 5)
        }));
      }
      this.beat = 0;
    }

    Network.prototype.drawOverlay = function() {
      this.ctx.globalCompositeOperation = "overlay"; //or darken or soft-light
      this.ctx.rect(0, 0, this.canvas.width, this.canvas.height);
      this.ctx.fillStyle = this.grd;
      this.ctx.fill();
    }


    Network.prototype.update = function() {
      for (var i = this.aDots.length - 1; i >= 0; i--) {
        if (this.aDots[i].alive)
          this.aDots[i].update();
        else
          this.aDots.splice(i, 1);
      }
      if (this.drawLine)
        this.checkLines();
      if (this.beat >= this.heartSpeed && !this.mouse.moving)
        this.heartBeat();
      else
        this.beat++;
    }

    Network.prototype.draw = function() {
      this.ctx.globalCompositeOperation = "source-over";
      this.ctx.fillStyle = "rgba( 1, 0, 0, 1 )";
      this.ctx.fillRect(0, 0, window.innerWidth, window.innerHeight);

      for (var i = this.aDots.length - 1; i >= 0; i--) {
        this.aDots[i].draw(this.ctx);
      }

      if (this.drawLine) {
        for (var i = this.aLines.length - 1; i >= 0; i--) {
          this.aLines[i].draw(this.ctx);
        }
      }

      this.drawOverlay();

    }

    Network.prototype.run = function() {
      this.update();
      this.draw();
      if (this.bRuning)
        requestAnimationFrame(this.run.bind(this));
    }

    Network.prototype.start = function() {
      this.bRuning = true;
      this.run();
    }

    Network.prototype.stop = function() {
      this.bRuning = false;
    }

    var Dot = function(mouse) {
      this.x = mouse.x;
      this.y = mouse.y;
      this.vx = rand(mouse.vx - 1.5, mouse.vx + 1.5) * 1.1;
      this.vy = rand(mouse.vy - 1.5, mouse.vy + 1.5) * 1.1;
      this.r = rand(0, 4);
      this.life = rand(1, 5) * (this.r * .3);
      this.alive = true;
      this.friction = rand(0.02, 0.2);
      this.a = 1;
    }
    Dot.prototype.isOut = function() {
      return (this.x < 0 || this.x > window.innerWidth || this.y < 0 || this.y > window.innerHeight)
    }
    Dot.prototype.update = function() {
      //check bounce
      if (this.x < 0 || this.x > window.innerWidth)
        this.vx *= -.8;

      if (this.y < 0 || this.y > window.innerHeight)
        this.vy *= -.8;

      //stock last x/y
      this.lx = this.x;
      this.ly = this.y;

      //set new x/y
      this.x += this.vx;
      this.y += this.vy;


      //friction velocity
      if (this.vx > 2)
        this.vx -= this.friction;
      else if (this.vx < -2)
        this.vx += this.friction;


      if (this.vy > 2)
        this.vy -= this.friction;
      else if (this.vy < -2)
        this.vy += this.friction;

      //check life
      if (this.life <= 0) {
        //check alpha
        if (this.a <= 0) {
          this.alive = false;
        } else {
          this.a -= 0.09;
        }


      } else {
        this.life -= 0.1;
      }
    }
    Dot.prototype.draw = function(ctx) {
      ctx.beginPath();
      ctx.moveTo(this.lx, this.ly);
      ctx.lineTo(this.x, this.y);
      ctx.strokeStyle = "rgba( 255, 255, 255, " + this.a + " )";
      ctx.lineWidth = this.r;
      ctx.lineCap = 'round';
      ctx.stroke();
      ctx.closePath();
    }



    var Line = function(dot1, dot2, dist, mDist) {
      this.x1 = dot1.x;
      this.y1 = dot1.y;
      this.x2 = dot2.x;
      this.y2 = dot2.y;
      this.w = 0.1;
      this.size = dist;
      this.mSize = mDist;

      this.a = this.getDistAlpha();
      this.a = Math.min(dot1.a, dot2.a, this.a);
    }
    Line.prototype.getDistAlpha = function() {

      var pcDist = (this.size * 100) / this.mSize;
      var aDist = 100 - ((100 * pcDist) / 100);
      return aDist / 100;
    }
    Line.prototype.draw = function(ctx) {

      ctx.beginPath();
      ctx.moveTo(this.x1, this.y1);
      ctx.lineTo(this.x2, this.y2);

      ctx.strokeStyle = "rgba( 255, 255, 255, " + (this.a * 2) + " )";
      ctx.lineWidth = this.w;
      ctx.stroke();
      ctx.closePath();
    }


    rand = function(min, max) {
      return Math.random() * (max - min) + min;
    };
    onresize = function() {
      oNetwork.canvas.width = window.innerWidth;
      oNetwork.canvas.height = window.innerHeight;
      oNetwork.getGrd();
    };


    var oNetwork;
    init = function() {
      oNetwork = new Network();
      oNetwork.start();
    }

    window.onload = init;
  </script>



  <script>
    // cube
    ! function() {
      "use strict";
      //
      // ===== pointer library =====
      //
      var screen = {};
      (function() {
        this.elem = document.getElementById("screen"),
          this.width = 0;
        this.height = 0;
        this.resize = function() {
          this.width = +this.elem.offsetWidth;
          this.height = +this.elem.offsetHeight;
        }
        this.elem.onselectstart = function() {
          return false;
        }
        this.elem.ondragstart = function() {
          return false;
        }
        window.addEventListener('resize', this.resize.bind(this), false);
        this.resize();
        this.pointer = {
          x: 0,
          y: 0,
          dx: 0,
          dy: 0,
          touchMode: false,
          center: function(s) {
            this.dx *= s;
            this.dy *= s;
            endX = endY = 0;
          }
        }
        var started = false,
          startX = 0,
          startY = 0,
          endX = 0,
          endY = 0;
        this.addEvent = function(e, fn) {
          for (var i = 0, events = e.split(','); i < events.length; i++) {
            this.elem.addEventListener(events[i], fn.bind(this.pointer), false);
          }
        }
        this.addEvent("mousemove,touchmove", function(e) {
          e.preventDefault();
          this.touchMode = e.targetTouches;
          var pointer = this.touchMode ? this.touchMode[0] : e;
          this.x = pointer.clientX;
          this.y = pointer.clientY;
          if (started) {
            this.dx = endX - (this.x - startX);
            this.dy = endY - (this.y - startY);
          }
        });
        this.addEvent("mousedown,touchstart", function(e) {
          e.preventDefault();
          this.touchMode = e.targetTouches;
          var pointer = this.touchMode ? this.touchMode[0] : e;
          startX = this.x = pointer.clientX;
          startY = this.y = pointer.clientY;
          started = true;
          setTimeout(function() {
            if (!started && Math.abs(startX - this.x) < 11 && Math.abs(startY - this.y) < 11) {
              if (this.tap) this.tap(e);
            }
          }.bind(this), 200);
        });
        this.addEvent("mouseup,touchend,touchcancel", function(e) {
          e.preventDefault();
          endX = this.dx;
          endY = this.dy;
          started = false;
        });
      }).apply(screen);
      var pointer = screen.pointer;
      var transform = (typeof document.body.style.webkitTransform != "undefined") ? "-webkit-transform" : "transform";
      //
      // ===== tweens engine =====
      //
      var tweens = {};
      (function() {
        var tweens = [];
        var proto = {
          normalPI: function() {
            if (Math.abs(this.target - this.value) > Math.PI) {
              if (this.target < this.value) this.value -= 2 * Math.PI;
              else this.value += 2 * Math.PI;
            }
          },
          setTarget: function(target, speedMod) {
            this.speedMod = (speedMod) ? speedMod : 1;
            this.target = target;
            if (this.isAngle) {
              this.target = this.target % (2 * Math.PI);
              this.normalPI();
            }
            if (this.running && this.oldTarget === target) return;
            this.oldTarget = target;
            this.running = true;
            this.prog = 0;
            this.from = this.value;
            this.dist = -(this.target - this.from) * 0.5;
          },
          ease: function() {
            if (!this.running) return;
            var s = this.speedMod * this.steps;
            if (this.prog++ < s) {
              this.value = this.dist * (Math.cos(Math.PI * (this.prog / s)) - 1) + this.from;
              if (this.isAngle) this.normalPI();
            } else {
              this.running = false;
              this.value = this.target;
            }
          }
        }
        this.add = function(steps, initValue, initValueTarget, isAngle) {
          var tween = Object.create(proto);
          tween.target = initValueTarget || 0;
          tween.value = initValue || 0;
          tween.steps = steps;
          tween.isAngle = isAngle || false;
          tween.speedMod = 1;
          tween.setTarget(tween.target);
          tweens.push(tween);
          return tween;
        }
        this.iterate = function() {
          for (var i = 0, len = tweens.length; i < len; i++) {
            tweens[i].ease();
          }
        }
      }).apply(tweens);
      //
      // ===== css3D engine =====
      //
      var cube = document.getElementById("cube");
      var faces = document.querySelectorAll(".face");
      // ---- read computed matrix ----
      var getComputedMatrix = function(elem) {
          var computedStyle = getComputedStyle(elem, null);
          var val = computedStyle.transform || computedStyle.webkitTransform;
          return val.split(/\s*[(),]\s*/).slice(1, -1);
        }
        // ---- initial transformation ----
      for (var i = 0, len = faces.length; i < len; i++) {
        var face = faces[i];
        face.style[transform] = face.getAttribute("data-transform");
      }
      // ---- target photo ----
      pointer.tap = function(e) {
          if (e.target.className.indexOf("face") >= 0) {
            var t = e.target.alt == "" ? e.target : document.getElementById(e.target.alt);
            camera.setTarget(t);
          }
        }
        // ---- set camera -----
      var camera = {
          globalRX: 0,
          globalRY: 0,
          z: tweens.add(100, 0, 0),
          rx: tweens.add(100, 0, 0, true),
          ry: tweens.add(100, 0, 0, true),
          targeted: null,
          setTarget: function(elem) {
            // read transformation matrix
            var matrix = getComputedMatrix(elem);
            // determine target angles
            var rotateY = Math.asin(-matrix[2]);
            var rotateX = Math.atan2(+matrix[6], +matrix[10]);
            if (rotateY) rotateY -= Math.PI;
            if (rotateX) rotateX -= Math.PI;
            // set target
            if (this.targeted) {
              this.targeted.style.outline = "rgba(0,0,0,1) solid 10px";
            }
            if (this.targeted != elem) {
              this.z.setTarget(600);
              if (elem.id == "4") {
                document.getElementById("7").style.visibility = "hidden";
              }
              if (elem.id == "7") {
                this.z.setTarget(-200);
                document.getElementById("7").style.visibility = "visible";
              }
              elem.style.outline = "rgba(255,255,255,1) solid 10px";
              this.targeted = elem;
            } else {
              this.z.setTarget(0);
              if (elem.id == "7") {
                camera.setTarget(document.getElementById("1"));
                return;
              }
              this.targeted = null;
            }
            // set target angles
            this.rx.setTarget(rotateX);
            this.ry.setTarget(rotateY);
          },
          move: function() {
            tweens.iterate();
            if (pointer.touchMode) {
              // interaction on touch mobiles
              var x = -pointer.dy * 0.001;
              var y = pointer.dx * 0.001;
              pointer.center(0.98);
            } else {
              // interaction with mouse
              var x = -(pointer.y - screen.height * 0.5) * 0.001;
              var y = +(pointer.x - screen.width * 0.5) * 0.001;
            }
            // ease global angles
            this.globalRX += ((x - this.globalRX) * 0.1);
            this.globalRY += ((y - this.globalRY) * 0.1);
            // cube transformation
            cube.style[transform] = "translateZ(" + (this.z.value) + "px) rotateX(" + (this.rx.value + this.globalRX) + "rad) rotateY(" + (this.ry.value + this.globalRY) + "rad)";
          }
        }
        // main loop
      var run = function() {
        requestAnimationFrame(run);
        camera.move();
      }
      run();
    }();
  </script>
</body>

</html>
